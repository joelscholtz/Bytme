@model IEnumerable<bytme.Models.UserModel>
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<h2 style="margin-left:10%">Users</h2>

<div class="container" style="display:inline-block">
    @using (Html.BeginForm())
    {
        <!--searchbar-->
        @Html.TextBox("searchKeyU", null, new { @class = "form-control", style = " width:70%; margin-left:9%; float:left", placeholder = "search table..", type = "text", id = "searchUser", title = "search for user" })
        <input class="form-control" type="submit" value="Search"
               style="width:auto; float:right; margin-right:14%; background-color:#f0e5f2; color:#B388B8; border-color:#B388B8;" />

    }
</div>

<hr />

<!--makes table containing user data-->
<div class="container">
    <table id="userTable" class="table"
           style="overflow-y:scroll; height:260px; width:75%; display:block; margin-left:10%">
        <thead>
            <tr>
                <th style="width:30%">
                    ID
                </th>
                <th>
                    NAME
                </th>
                <th>
                    SURNAME
                </th>
                <th style="width:30%">
                    EMAIL
                </th>

                <th>

                </th>
                <th>

                </th>
            </tr>
            @foreach (var user in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(ModelUser => user.Id)
                    </td>
                    <td>
                        @Html.DisplayFor(ModelUser => user.name)
                    </td>
                    <td>
                        @Html.DisplayFor(ModelUser => user.surname)
                    </td>
                    <td>
                        @Html.DisplayFor(ModelUser => user.Email)
                    </td>

                    <td>
                        <button data-toggle="modal" data-target="#edit_user_@user.Id" class="btn btn-default" style="color:#4D6810;background-color: #d0dfb7;border-color:#4D6810;">edit</button>
                    </td>
                    <td>
                        <button data-toggle="modal" data-target="#delete_user_@user.Id" class="btn btn-default" style="color: #A94442;background-color: #f3d1d1;border-color: #A94442;">delete</button>
                    </td>
                </tr>
            }
        </thead>
    </table>
</div>


<!--makes delete modal for each user-->
@foreach (var _user in Model)
{
    <div id="delete_user_@_user.Id" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header" style="padding-left:8%;background-color: #d06363;-webkit-border-top-left-radius: 5px; -webkit-border-top-right-radius: 5px;">

                    <div class="modal-title" style="font-size: 24px; color:#ffffff; font-weight: 600;">Delete</div>
                    <p style="color:#f3d1d1; margin-bottom:0">Are you sure you want to delete this user?</p>
                </div>

                <div class="modal-body" style="padding-left:8%">
                    <!--vertical table-->
                    <table>
                        <thead>
                            <tr>
                                <th style="width:30%">
                                    Id:
                                </th>
                                <td>
                                    @_user.Id
                                </td>
                            </tr>
                            <tr>
                                <th style="width:30%">
                                    Full Name:
                                </th>
                                <td>
                                    @($"{_user.name} {_user.surname}")
                                </td>
                            </tr>
                            <tr>
                                <th style="width:30%">
                                    Email:
                                </th>
                                <td>
                                    @_user.Email
                                </td>
                            </tr>
                            <tr>
                                <th style="width:30%">
                                    Verified:
                                </th>
                                <td>
                                    <!--turns true/false value into yes or no-->
                                    @{
                                        var shiet = "";
                                        if (_user.EmailConfirmed)
                                        { shiet = "yes"; }
                                        else
                                        { shiet = "no"; }
                                    }
                                    @shiet
                                </td>
                            </tr>
                            <tr>
                                <th style="width:30%">
                                    Address:
                                </th>
                                <td>
                                    @($"{_user.street} {_user.streetnumber}, {_user.zipcode} {_user.city}")
                                <td>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" style="color: #A94442;background-color: #f3d1d1;border-color: #A94442;">Delete</button>
                    <button class="btn btn-default" data-dismiss="modal">cancel</button>
                </div>
            </div>
        </div>
    </div>
}

<!--makes edit modal for each user-->
@foreach (var _user in Model)
{
    //welcome to <div> hell
    <div id="edit_user_@_user.Id" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header" style="padding-left:8%;background-color: #B388B8;-webkit-border-top-left-radius: 5px; -webkit-border-top-right-radius: 5px;">

                    <div class="modal-title" style="font-size: 24px; color:#ffffff; font-weight: 600;">Edit</div>
                    <p style="color:#eedef2; margin-bottom:0">Edit user data</p>
                </div>

                <div class="modal-body" style="padding-left:8%">
                    <table style=" vertical-align:auto">
                        <thead>
                            <tr>
                                <th style="width:30%">
                                    Id:
                                </th>
                                <td>
                                    @_user.Id
                                </td>
                            </tr>
                            <tr>
                                <th style="width:30%">
                                    Full Name:
                                </th>
                                <td>
                                    @($"{_user.name} {_user.surname}")
                                </td>
                            </tr>
                            <tr>
                                <th style="width:30%">
                                    Email:
                                </th>
                                <td>
                                    @_user.Email
                                </td>
                            </tr>
                            <tr>
                                <th style="width:30%">
                                    Verified:
                                </th>
                                <td>
                                    @{
                                        var shiet = "";
                                        if (_user.EmailConfirmed)
                                        { shiet = "yes"; }
                                        else
                                        { shiet = "no"; }
                                    }
                                    @shiet
                                </td>
                            </tr>
                            <tr>
                                <th style="width:30%">
                                    Address:
                                </th>
                                <td>
                                    @($"{_user.street} {_user.streetnumber}, {_user.zipcode} {_user.city}")
                                <td>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" style="color:#4D6810;background-color: #d0dfb7;border-color:#4D6810;">Save</button>
                    <button class="btn btn-default" data-dismiss="modal">cancel</button>
                </div>
            </div>
        </div>
    </div>
}
